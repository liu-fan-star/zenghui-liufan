<!DOCTYPE html>
<html>

<head>
    <title>照片墙</title>
    <meta charset=utf-8>
    <meta name=viewport content="width=device-width,user-scalable=no,minimum-scale=1,maximum-scale=1">
    <style>
        html,body{height:100%}body{background-color:#000;margin:0;font-family:Helvetica,sans-serif;overflow:hidden}a{color:#fff}#info{position:absolute;width:100%;color:#fff;padding:5px;font-family:Monospace;font-size:13px;font-weight:700;text-align:center;z-index:1}#menu{position:absolute;bottom:20px;width:100%;text-align:center}.element{width:100px;height:100px;box-shadow:0 0 12px rgba(0,255,255,.5);border:1px solid rgba(127,255,255,.25);text-align:center;cursor:default}.element:hover{box-shadow:0 0 12px rgba(0,255,255,.75);border:1px solid rgba(127,255,255,.75)}.element img{width:100px;height:100px}.element .number{position:absolute;top:20px;right:20px;font-size:12px;color:rgba(127,255,255,.75)}.element .symbol{position:absolute;top:40px;left:0;right:0;font-size:60px;font-weight:700;color:rgba(255,255,255,.75);text-shadow:0 0 10px rgba(0,255,255,.95)}.element .details{position:absolute;bottom:15px;left:0;right:0;font-size:12px;color:rgba(127,255,255,.75)}button{color:rgba(127,255,255,.75);background:0 0;outline:1px solid rgba(127,255,255,.75);border:0;padding:5px 10px;cursor:pointer}button:hover{background-color:rgba(0,255,255,.5)}button:active{color:#000;background-color:rgba(0,255,255,.75)}.show_info{position:fixed;background-color:rgba(0,0,0,.6);padding:10px;width:300px;margin:0 auto;left:0;right:0;border-radius:5px;box-shadow:0 0 10px 0 #fff;top:30%}.show_info img{display:block;margin:auto;border-radius:5px;box-shadow:0 0 10px 0 #888}.show_info .intro{color:#fff;text-indent:20px;margin-top:10px;height:65px;overflow:hidden;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical}.show_info .info_my{text-align:center}.show_info .info_my>*{display:inline-block!important;vertical-align:middle}.show_info .info_my .info_mem{color:#fff;max-width:120px}.show_info .info_my .info_mem>div{text-align:left}.show_info .info_my .info_mem>div.nickname{max-width:120px;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}
    </style>
    <link rel=stylesheet href=css/animate.min.css>

<body>
    <script src=js/jquery.min.js></script>
    <script src=js/three.js></script>
    <script src=js/tween.min.js></script>
    <script src=js/TrackballControls.js></script>
    <script src=js/CSS3DRenderer.js></script>
    <div id=container></div><audio autoplay loop>
        <source src=http://www.ytmp3.cn/down/72794.mp3>
    </audio>
    <div id=info>3D签到墙</div>
    <div id=menu><button id=table>表格</button> <button id=sphere>球球</button> <button id=helix>螺旋</button> <button id=grid>格子</button></div>
    <div class="show_info animated" style=display:none>
        <div class=info_my><img src=img/main.jpg style="width:80px;height:100px">
            <div class=info_mem>
                <div class=nickname>姓名：曾慧</div>
                <div class=id>ID:小曾慧</div>
                <div class=vote>性别：女</div>
            </div>
        </div>
        <div class=intro>别问我什么星座，我只为你量身定做。</div>
    </div>
    <script>
        function init(){camera=new THREE.PerspectiveCamera(40,window.innerWidth/window.innerHeight,1,1e4),camera.position.z=3e3,scene=new THREE.Scene;for(var e=0;e<table.length;e++){var t=document.createElement("div");t.className="element",t.style.backgroundColor="rgba(0,127,127,"+(.5*Math.random()+.25)+")";var n=document.createElement("img");n.src=table[e].image,t.appendChild(n);var r=new THREE.CSS3DObject(t);r.position.x=4e3*Math.random()-2e3,r.position.y=4e3*Math.random()-2e3,r.position.z=4e3*Math.random()-2e3,scene.add(r),objects.push(r);var r=new THREE.Object3D;r.position.x=140*table[e].p_x-1330,r.position.y=-(180*table[e].p_y)+990,targets.table.push(r)}for(var o=new THREE.Vector3,a=new THREE.Spherical,e=0,i=objects.length;i>e;e++){var s=Math.acos(-1+2*e/i),d=Math.sqrt(i*Math.PI)*s,r=new THREE.Object3D;a.set(800,s,d),r.position.setFromSpherical(a),o.copy(r.position).multiplyScalar(2),r.lookAt(o),targets.sphere.push(r)}for(var o=new THREE.Vector3,c=new THREE.Cylindrical,e=0,i=objects.length;i>e;e++){var d=.175*e+Math.PI,l=-(5*e)+450,r=new THREE.Object3D;c.set(900,d,l),r.position.setFromCylindrical(c),o.x=2*r.position.x,o.y=r.position.y,o.z=2*r.position.z,r.lookAt(o),targets.helix.push(r)}for(var e=0;e<objects.length;e++){var r=new THREE.Object3D;r.position.x=e%5*400-800,r.position.y=300*-(Math.floor(e/5)%5)+500,r.position.z=200*Math.floor(e/25)-800,targets.grid.push(r)}renderer=new THREE.CSS3DRenderer,renderer.setSize(window.innerWidth,window.innerHeight),renderer.domElement.style.position="absolute",document.getElementById("container").appendChild(renderer.domElement),controls=new THREE.TrackballControls(camera,renderer.domElement),controls.rotateSpeed=.5,controls.minDistance=500,controls.maxDistance=6e3,controls.addEventListener("change",render);var u=0;setInterval(function(){switch(u=u>=3?0:u,++u,u){case 1:transform(targets.sphere,1e3);break;case 2:transform(targets.helix,1e3);break;case 3:transform(targets.grid,1e3)}},8e3);var m=document.getElementById("table");m.addEventListener("click",function(){transform(targets.table,1e3)},!1);var m=document.getElementById("sphere");m.addEventListener("click",function(){transform(targets.sphere,2e3)},!1);var m=document.getElementById("helix");m.addEventListener("click",function(){transform(targets.helix,2e3)},!1);var m=document.getElementById("grid");m.addEventListener("click",function(){transform(targets.grid,2e3)},!1),transform(targets.table,2e3),window.addEventListener("resize",onWindowResize,!1)}function transform(e,t){TWEEN.removeAll();for(var n=0;n<objects.length;n++){var r=objects[n],o=e[n];new TWEEN.Tween(r.position).to({x:o.position.x,y:o.position.y,z:o.position.z},Math.random()*t+t).easing(TWEEN.Easing.Exponential.InOut).start(),new TWEEN.Tween(r.rotation).to({x:o.rotation.x,y:o.rotation.y,z:o.rotation.z},Math.random()*t+t).easing(TWEEN.Easing.Exponential.InOut).start()}new TWEEN.Tween(this).to({},2*t).onUpdate(render).start()}function onWindowResize(){camera.aspect=window.innerWidth/window.innerHeight,camera.updateProjectionMatrix(),renderer.setSize(window.innerWidth,window.innerHeight),render()}function animate(){scene.rotation.y+=.008,requestAnimationFrame(animate),TWEEN.update(),controls.update(),render()}function render(){renderer.render(scene,camera)}for(var personArray=new Array,CurPersonNum=0,_in=["bounceIn","bounceInDown","bounceInLeft","bounceInRight","bounceInUp","fadeIn","fadeInDown","fadeInDownBig","fadeInLeft","fadeInLeftBig","fadeInRight","fadeInRightBig","fadeInUp","fadeInUpBig","rotateIn","rotateInDownLeft","rotateInDownRight","rotateInUpLeft","rotateInUpRight","slideInDown","slideInLeft","slideInRight"],_out=["bounceOut","bounceOutDown","bounceOutLeft","bounceOutRight","bounceOutUp","fadeOut","fadeOutDown","fadeOutDownBig","fadeOutLeft","fadeOutLeftBig","fadeOutRight","fadeOutRightBig","fadeOutUp","fadeOutUpBig","rotateOut","rotateOutDownLeft","rotateOutDownRight","rotateOutUpLeft","rotateOutUpRight","slideOutDown","slideOutLeft","slideOutRight"],s=setInterval(function(){var e=parseInt(Math.random()*_in.length,10),t=parseInt(Math.random()*_out.length,10);CurPersonNum>=personArray.length&&(CurPersonNum=0),$(".show_info").show(),$(".show_info").addClass(_in[e]),setTimeout(function(){$(".show_info").removeClass(_in[e]);var n=document.getElementsByClassName("element")[CurPersonNum].getElementsByTagName("img")[0];n.setAttribute("src","img/1.jpg"),++CurPersonNum,setTimeout(function(){$(".show_info").addClass(_out[t]),setTimeout(function(){$(".show_info").removeClass(_out[t]),$(".show_info").hide()},1e3)},1500)},1e3)},4500),i=0;199>i;i++)personArray.push({image:"img/"+((i+1)%36+1)+".jpg"});for(var table=new Array,i=0;i<personArray.length;i++)table[i]=new Object,i<personArray.length&&(table[i]=personArray[i],table[i].src=personArray[i].thumb_image),table[i].p_x=i%20+1,table[i].p_y=Math.floor(i/20)+1;var camera,scene,renderer,controls,objects=[],targets={table:[],sphere:[],helix:[],grid:[]};init(),animate();
    </script>
